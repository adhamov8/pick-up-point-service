# Проект «Сервис пункта выдачи заказов» 

Это учебный проект, выполненный в рамках курса Route256. Сервис имитирует работу пункта выдачи заказов (ПВЗ) и включает в себя следующие основные возможности:

- Приём заказов от курьера (с указанием получателя, срока хранения, упаковки и т.д.)
- Удаление заказов из ПВЗ
- Выдача заказов клиенту
- Получение списка заказов (с учётом пагинации)
- Приём возвратов от клиента
- Получение списка возвратов (с пагинацией)
- Учёт упаковки (пакет, коробка, пленка) и логика расчёта стоимости
- Хранение информации о заказах в **PostgreSQL** (через миграции **Goose**)
- **Kafka-продюсер** для отправки событий о заказах (приём, выдача, возврат)
- **gRPC-сервис** и **CLI-клиент**
- **HTTP-прокси** через gRPC-Gateway (REST-поддержка)
- **In-memory Cache** (с поддержкой LRU/LFU) для снижения нагрузки на БД
- **Сбор метрик (Prometheus)** и трейсинг

---

## Структура проекта

```bash
.
├── api
│   └── order_service/v1          # Прото-файлы сервиса
├── cmd
│   ├── client                    # CLI-клиент
│   │   └── main.go
│   ├── server                    # gRPC-сервер
│      └── main.go
├── config                        # Файлы конфигурации (yaml, prometheus.yml)
├── internal                      # Внутренняя бизнес-логика (реализация in-memory Cache (LRU/LFU) с тестами, адаптер входящих gRPC-                                       # запросов к usecase, основные сущности, доступ к PostgreSQL, бизнес-логика)
├── migrations                    # SQL-миграции для БД 
├── docker-compose.yml            # Локальное окружение (PostgreSQL, Kafka, Kafka-UI, Prometheus, Grafana)
├── go.mod                        # Файл с зависимостями
├── go.sum                        # Хэши и версии зависимостей
├── Makefile                      # Скрипты сборки, запуска и генерации
└──screenshot                     # скриншот отправленного сообщения, который можно получить используя `kafka-ui`
```


## Как запустить проект

### 1. Клонируете репозиторий:

```bash
git clone https://github.com/adhamov8/pick-up-point-service.git
cd pick-up-point-service
```

### 2. Поднять инфраструктуру (PostgreSQL, Kafka и т.д.)

```bash
make up
```

### Или напрямую:

```bash
docker-compose up -d
```

### 3. Применить миграции:

```bash
make migrate
```

### 4. Собрать приложение:

```bash
make build
```

### 5. Запустить gRPC-сервер:

```bash
make run
```

По умолчанию сервер поднимается на **localhost:50051**.


  








